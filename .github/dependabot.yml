# Dependabot configuration for ButterGolf monorepo
# Automatically checks for dependency updates across all packages
# https://docs.github.com/code-security/dependabot/dependabot-version-updates/configuration-options-for-the-dependabot.yml-file

version: 2
updates:
  # Root workspace dependencies (pnpm catalog)
  # CRITICAL: This is where the pnpm catalog lives, so grouping here
  # ensures related packages are updated together in a single PR
  - package-ecosystem: "npm"
    directory: "/"
    schedule:
      interval: "weekly"
      day: "monday"
    open-pull-requests-limit: 10
    groups:
      # CRITICAL: Group ALL Tamagui packages together
      # All 18 @tamagui/* packages must be the same version
      tamagui:
        patterns:
          - "tamagui"
          - "@tamagui/*"
      # Group entire React ecosystem together
      # These are pinned via pnpm overrides and must match
      react:
        patterns:
          - "react"
          - "react-dom"
          - "react-native"
          - "react-native-*"
          - "@types/react"
          - "@types/react-dom"
          - "react-test-renderer"
          - "react-is"
      # Group Prisma together (client + CLI must match)
      prisma:
        patterns:
          - "prisma"
          - "@prisma/*"
      # Group Expo together
      expo:
        patterns:
          - "expo"
          - "expo-*"
          - "@expo/*"
      # Group Solito (cross-platform navigation)
      solito:
        patterns:
          - "solito"
      # Group testing tools
      testing:
        patterns:
          - "vitest"
          - "@testing-library/*"
      # Group build tools
      dev-dependencies:
        patterns:
          - "prettier"
          - "turbo"
          - "typescript"
          - "tsx"
          - "eslint"
          - "eslint-*"
          - "@types/node"

  # Web app (Next.js)
  - package-ecosystem: "npm"
    directory: "/apps/web"
    schedule:
      interval: "weekly"
      day: "monday"
    open-pull-requests-limit: 5
    groups:
      nextjs:
        patterns:
          - "next"
          - "@next/*"
      clerk:
        patterns:
          - "@clerk/*"
          - "svix"

  # Mobile app (Expo)
  - package-ecosystem: "npm"
    directory: "/apps/mobile"
    schedule:
      interval: "weekly"
      day: "monday"
    open-pull-requests-limit: 5
    groups:
      expo:
        patterns:
          - "expo"
          - "expo-*"
      react-native:
        patterns:
          - "react-native"
          - "react-native-*"
      clerk:
        patterns:
          - "@clerk/*"
      navigation:
        patterns:
          - "@react-navigation/*"

  # UI package
  - package-ecosystem: "npm"
    directory: "/packages/ui"
    schedule:
      interval: "weekly"
      day: "monday"
    open-pull-requests-limit: 5
    groups:
      tamagui:
        patterns:
          - "tamagui"
          - "@tamagui/*"

  # Database package (Prisma)
  - package-ecosystem: "npm"
    directory: "/packages/db"
    schedule:
      interval: "weekly"
      day: "monday"
    open-pull-requests-limit: 5
    groups:
      prisma:
        patterns:
          - "prisma"
          - "@prisma/*"

  # App package (shared features)
  - package-ecosystem: "npm"
    directory: "/packages/app"
    schedule:
      interval: "weekly"
      day: "monday"
    open-pull-requests-limit: 5

  # Config package
  - package-ecosystem: "npm"
    directory: "/packages/config"
    schedule:
      interval: "weekly"
      day: "monday"
    open-pull-requests-limit: 5
    groups:
      tamagui:
        patterns:
          - "tamagui"
          - "@tamagui/*"

  # GitHub Actions workflows
  - package-ecosystem: "github-actions"
    directory: "/"
    schedule:
      interval: "monthly"
    open-pull-requests-limit: 5
