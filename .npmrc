# =============================================================================
# pnpm Configuration for Deterministic Builds
# =============================================================================

# -----------------------------------------------------------------------------
# Dependency Resolution Strategy
# -----------------------------------------------------------------------------
# Use "lowest-direct" to prevent automatic upgrades within semver ranges
# This ensures `pnpm install` only upgrades when explicitly requested
resolution-mode=lowest-direct

# Prefer workspace packages over registry versions
prefer-workspace-packages=true

# -----------------------------------------------------------------------------
# Version Locking & Consistency
# -----------------------------------------------------------------------------
# Save exact versions when adding new dependencies via `pnpm add`
save-exact=true

# Prevent lockfile updates during install (local development)
# Set to false to allow lockfile generation; CI enforces --frozen-lockfile
prefer-frozen-lockfile=true

# -----------------------------------------------------------------------------
# Hoisting Configuration (Required for React Native + Tamagui)
# -----------------------------------------------------------------------------
# Hoist dependencies to root to avoid duplication
shamefully-hoist=true

# Ensure all packages use the same React version
dedupe-peer-dependents=true
strict-peer-dependencies=false

# Public hoisting patterns - required for Metro bundler and Tamagui
public-hoist-pattern[]=*react*
public-hoist-pattern[]=*@tamagui*
public-hoist-pattern[]=expo-*
public-hoist-pattern[]=@expo/*

# -----------------------------------------------------------------------------
# Performance & Caching
# -----------------------------------------------------------------------------
# Side effects cache for faster rebuilds
side-effects-cache=true

# Enable content-addressable storage linking
use-store-server=false
